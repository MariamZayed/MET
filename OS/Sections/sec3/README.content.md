# Session 2: File Permissions & Ownership in Linux

## 1. مقدمة

النهارده هنتكلم عن جزء مهم جدًا في Linux وهو **File Permissions & Ownership**.
الموضوع ده بيخلينا نفهم مين يقدر يفتح، يعدّل، أو يشغّل ملف معين، ومين لا.
وده من أهم أساسيات الأمان في أي نظام تشغيل.

---

## 2. فكرة الملكية (Ownership)

كل ملف أو فولدر في لينكس له **3 أنواع من الملاك**:

* **User (المالك)**: الشخص اللي أنشأ الملف.
* **Group (المجموعة)**: مجموعة مستخدمين ليهم صلاحيات مشتركة.
* **Others (الآخرين)**: أي مستخدم تاني على النظام.

يعني النظام بيقسّم الناس اللي ممكن يتعاملوا مع الملف لـ 3 فئات.

مثال عملي:

```bash
ls -l notes.txt
```

الناتج ممكن يطلع كده:

```
-rw-r--r-- 1 mariam staff 2048 Oct 7 10:00 notes.txt
```

نقرأها إزاي؟

* `-rw-r--r--` → دي الصلاحيات.
* `mariam` → دي المالك.
* `staff` → دي المجموعة.
* `notes.txt` → اسم الملف.

يبقى مريم هي اللي ليها التحكم الكامل في الملف ده.

---

## 3. فكرة الصلاحيات (Permissions)

كل ملف أو فولدر له 3 أنواع من الصلاحيات:

* **r** = read (قراءة)
* **w** = write (كتابة أو تعديل)
* **x** = execute (تشغيل)

وبيظهروا بالشكل ده:

```
rwx rwx rwx
|   |   |
|   |   └── others
|   └────── group
└────────── user
```

🧠 مثال:

```
-rw-r--r--
```

* الـ user: يقرأ ويكتب.
* الـ group: يقرأ فقط.
* الـ others: يقرأ فقط.

---

## 4. تعديل الصلاحيات (Changing Permissions)

في لينكس عندنا طريقتين نغير بيهم الصلاحيات:

### أ. الطريقة الرمزية (Symbolic Mode)

* `chmod u+x file` → أضف execute للمالك.
* `chmod g-w file` → احذف write من الجروب.
* `chmod o+r file` → أضف read للآخرين.

### ب. الطريقة الرقمية (Numeric Mode)

كل صلاحية ليها قيمة:

| Permission | Value |
| ---------- | ----- |
| r          | 4     |
| w          | 2     |
| x          | 1     |

بنجمّعهم عشان نحدد كل فئة تاخد إيه:

* `7` = 4+2+1 = `rwx`
* `6` = 4+2 = `rw-`
* `5` = 4+1 = `r-x`
* `4` = `r--`

🧠 مثال:

```bash
chmod 755 script.sh
```

* المالك (7): يقرأ، يكتب، ويشغّل.
* الجروب (5): يقرأ ويشغّل.
* الآخرون (5): يقرأ ويشغّل.

---

## 5. تغيير الملكية (Changing Ownership)

* `chown user file` → يغيّر المالك.
* `chgrp group file` → يغيّر المجموعة.

مثال:

```bash
sudo chown khaled notes.txt
```

كده الملف بقى ملك **khaled** بدل **mariam**.

---

## 6. التعامل مع "Permission Denied"

لو جالك الخطأ:

```
Permission denied
```

ده معناه إنك بتحاول تعمل حاجة مش مسموحالك بيها.

الحل:

* إمّا تستخدم `sudo` لو محتاجة صلاحيات أعلى.
* أو تغيّري الصلاحيات بالأوامر اللي فوق.

---

## 7. عرض أجزاء من الملف

أحيانًا بنحتاج نستعرض جزء من الملف مش كله:

* `head -n 20 file.txt` → أول 20 سطر.
* `tail -n 20 file.txt` → آخر 20 سطر.

---

## 8. Tasks

### **Task 1: عرض الصلاحيات**

1. أنشئ 3 ملفات (`file1.txt`, `file2.txt`, `file3.txt`) وفولدر (`mydir`).
2. استخدم `ls -l` وشوفي:

   * مين المالك؟
   * الصلاحيات الافتراضية شكلها إيه؟

---

### **Task 2: تعديل الصلاحيات**

1. أضيفي execute للـ user على `file1.txt`.
2. احذفي write من الجروب على `file2.txt`.
3. خلي `mydir` بصلاحيات كاملة (read, write, execute) لكل الناس.

---

### **Task 3: تجربة الملكية**

1. غيّري مالك ملف باستخدام `sudo chown`.
2. شوفي الفرق لما المستخدم التاني يحاول يفتحه.
3. عدّلي الصلاحيات عشان تسمحي له يفتحه.
